{% extends "base_back.html.twig" %}
{% block body %}
	<div class="conatiner-fluid content-inner mt-n5 py-0">
		<div class="row">
			{# <div class="col-md-12 col-lg-12">
				<div class="row row-cols-1">
					<div class="overflow-hidden d-slider1 swiper-container-initialized swiper-container-horizontal swiper-container-pointer-events">
						<ul class="p-0 m-0 mb-2 swiper-wrapper list-inline stat" id="swiper-wrapper-b2619b2aa14b9773" aria-live="polite">
							<li class="swiper-slide card card-slide swiper-slide-active aos-init aos-animate " data-aos="fade-up" data-aos-delay="700" role="group" aria-label="1 / 7" style="width: 355.333px; margin-right: 32px;">
								<div class="card-body">
									<div class="progress-widget">
										<div class="progress-detail">
											<p class="mb-2">Total Offers</p>
											<h4 class="counter" style="visibility: visible;">{{total_offre}}</h4>
										</div>
									</div>
								</div>
							</li>
							<li class="swiper-slide card card-slide swiper-slide-next aos-init aos-animate" data-aos="fade-up" data-aos-delay="800" role="group" aria-label="2 / 7" style="width: 355.333px; margin-right: 32px;">
								<div class="card-body">
									<div class="progress-widget">

										<div class="progress-detail">
											<p class="mb-2">Total Profit</p>
											<h4 class="counter" style="visibility: visible;">$185K</h4>
										</div>
									</div>
								</div>
							</li>
							<li class="swiper-slide card card-slide aos-init aos-animate" data-aos="fade-up" data-aos-delay="900" role="group" aria-label="3 / 7" style="width: 355.333px; margin-right: 32px;">
								<div class="card-body">
									<div class="progress-widget">

										<div class="progress-detail">
											<p class="mb-2">Total Cost</p>
											<h4 class="counter" style="visibility: visible;">$375K</h4>
										</div>
									</div>
								</div>
							</li>
							<li class="swiper-slide card card-slide aos-init aos-animate" data-aos="fade-up" data-aos-delay="1000" role="group" aria-label="4 / 7" style="width: 355.333px; margin-right: 32px;">
								<div class="card-body">
									<div class="progress-widget">


										<div class="progress-detail">
											<p class="mb-2">Revenue</p>
											<h4 class="counter" style="visibility: visible;">$742K</h4>
										</div>
									</div>
								</div>
							</li>
							<li class="swiper-slide card card-slide aos-init aos-animate" data-aos="fade-up" data-aos-delay="1100" role="group" aria-label="5 / 7" style="width: 355.333px; margin-right: 32px;">
								<div class="card-body">
									<div class="progress-widget">

										<div class="progress-detail">
											<p class="mb-2">Net Income</p>
											<h4 class="counter" style="visibility: visible;">$150K</h4>
										</div>
									</div>
								</div>
							</li>
							<li class="swiper-slide card card-slide aos-init aos-animate" data-aos="fade-up" data-aos-delay="1200" role="group" aria-label="6 / 7" style="width: 355.333px; margin-right: 32px;">
								<div class="card-body">
									<div class="progress-widget">

										<div class="progress-detail">
											<p class="mb-2">Today</p>
											<h4 class="counter" style="visibility: visible;">$4600</h4>
										</div>
									</div>
								</div>
							</li>

						</ul>
						<div class="swiper-button swiper-button-next" tabindex="0" role="button" aria-label="Next slide" aria-controls="swiper-wrapper-b2619b2aa14b9773" aria-disabled="false"></div>
						<div class="swiper-button swiper-button-prev swiper-button-disabled" tabindex="-1" role="button" aria-label="Previous slide" aria-controls="swiper-wrapper-b2619b2aa14b9773" aria-disabled="true"></div>
						<span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
					</div>
				</div> #}
			</div>
			<div class="col-sm-12">
				<div class="card">
					<div class="card-header d-flex justify-content-between flex-wrap">
						<div class="header-title">
							<h4 class="card-title mb-0">Offers</h4>
						</div>
						<div class="">
							{#search#}
							<form action="{{ path('app_admin_offre') }}" method="get" class="d-flex">
								<div class="input-group search-input">
									<span class="input-group-text" id="search-input">
										<svg class="icon-18" width="18" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<circle cx="11.7669" cy="11.7666" r="8.98856" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></circle>
											<path d="M18.0186 18.4851L21.5426 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
										</svg>
									</span>
									<input type="search" class="form-control" placeholder="Search..." name='searchTerm'>
								</div>
								<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
									<span class="navbar-toggler-icon">
										<span class="mt-2 navbar-toggler-bar bar1"></span>
										<span class="navbar-toggler-bar bar2"></span>
										<span class="navbar-toggler-bar bar3"></span>
									</span>
								</button>
							</div>
						</form>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table table-bordered">
								<thead>
									<tr>
										<th></th>
										<th class="text-center">USER
											<div style="float:right;"></div>
										</th>
										<th class="text-center">Date Publication

										</th>
										<th class="text-center">Action
											
										</th>
									</tr>
								</thead>
								<tbody>
									{% for offre in offres %}
                                    {% set user=offre.getOffreur() %}
										<tr class="">
											<td class="">
												{{offre.getNom()}}
												<div style="float:right;">


													<a class="btn btn-sm btn-icon text-danger " data-bs-toggle="tooltip" title="Delete Offer" href="#" href="{{path('app_delete_offre',{'id_offre':offre.id})}}">
														<span class="btn-inner">
															<svg class="icon-20" width="20" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor">
																<path d="M19.3248 9.46826C19.3248 9.46826 18.7818 16.2033 18.4668 19.0403C18.3168 20.3953 17.4798 21.1893 16.1088 21.2143C13.4998 21.2613 10.8878 21.2643 8.27979 21.2093C6.96079 21.1823 6.13779 20.3783 5.99079 19.0473C5.67379 16.1853 5.13379 9.46826 5.13379 9.46826" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																<path d="M20.708 6.23975H3.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
																<path d="M17.4406 6.23973C16.6556 6.23973 15.9796 5.68473 15.8256 4.91573L15.5826 3.69973C15.4326 3.13873 14.9246 2.75073 14.3456 2.75073H10.1126C9.53358 2.75073 9.02558 3.13873 8.87558 3.69973L8.63258 4.91573C8.47858 5.68473 7.80258 6.23973 7.01758 6.23973" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
															</svg>
														</span>
													</a>
												</div>
											</td>
											<td class="text-center">
												{{user.getEmail()}}
											</td>
											<td class="text-center">
												{{offre.getDatePublication()|date('Y-m-d') }}
											</td>
											<td class="text-center">
												<a >show more</a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
							{#start Pagination#}
							<div class="d-flex justify-content-center">
								{% do offres.setPageRange(2) %}
								{{knp_pagination_render(offres,'backoffice/offre/pagination.html.twig')}}
							</div>
							{#end Pagination#}
						</div>
						
					</div>
					
				</div>
			</div>
			<div class="col-sm-12">
				                 <div style="display: flex; justify-content: center; align-items: center; height: 80vh; margin:20px; padding:20px;">
										<div style="background-color: #fff; border: 1px solid #ccc; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); max-width: 800px;">
											<h1 style="text-align: center; margin-bottom: 20px; color: #333;">statistics of complaints by type</h1>
											<div style="text-align: center;">
												<canvas id="offreTypeByChart" width="400" height="400"></canvas>
											</div>
										</div>
									</div>
						</div>
		</div>
	</div>
	<style>
		.stat {
			width: 100px;
			height: 200px
		}
	</style>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var chartData = {{ chartData | raw }};
        var ctx = document.getElementById('offreTypeByChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie', // Changer le type de graphique en camembert (pie)
            data: chartData,
            options: {
                plugins: {
                    title: {
                        display: true,
                       // text: 'Répartition des réclamations par type',
                        color: '#333',
                        font: {
                            size: 16,
                            weight: 'bold'
                        }
                    },
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                size: 14
                            }
                        }
                    }
                }
            }
        });
    });
</script>
{% endblock %}
